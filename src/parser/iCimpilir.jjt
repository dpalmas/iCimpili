PARSER_BEGIN(iCimpilir)package parser;import recovery.*;import view.JanelaPrincipal;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.io.BufferedReader;import java.io.File;import java.io.FileNotFoundException;import java.io.FileReader;import java.io.IOException;import javax.swing.JOptionPane;import java.io.FileWriter;import controleDeArquivos.CreateFile;import java.io.FileWriter;import javax.swing.JFileChooser;public class iCimpilir{  final static JanelaPrincipal window = new JanelaPrincipal();    public static void main(String args []) throws ParseException  {			window.setVisible(true);				window.getCompilar().addActionListener(new ActionListener() {			public void actionPerformed(ActionEvent e) {	  			window.setVazioConsoleMsg();				if((window.getTextArquivo().getText().equals(window.getCampoTexto())) != true)                {                  window.setControleArquivo(false);                }                if(window.getControleArquivo() || window.getTextArquivo().getText().equals(" ") )                {									inicia();		   		}else				{					if(window.getTextArquivo().getText().equals(""))	                {	                    JOptionPane.showMessageDialog (null, "Arquivo vazio!", "Arquivo", JOptionPane.WARNING_MESSAGE);	                }else{	                  int resp = JOptionPane.showConfirmDialog(null, "Salvar alteracaoes?");	                                    	  if(resp == 0)                  	  {                  	                      	    if(window.getFile() == null)                  	    {                  	     	window.salvarComo();							inicia();							                  	    }else                   	    {                  	      	window.salvar();							inicia();                  	    }                  	  }                  	}				}		   	}  		});  }  static void inicia(){    FileReader arquivo = null;    //Leitura do disco    try {			arquivo = new FileReader(window.getFile());		} catch (FileNotFoundException e2) {			e2.printStackTrace();		}		BufferedReader arq = new BufferedReader(arquivo);	    try	    {	      iCimpilir parser = new iCimpilir(arq);	    }catch (Exception e1)	    {	      iCimpilir.ReInit(arq);	    }catch (Error e1)   		{   		  iCimpilir.ReInit(arq);   		}         	try      	{    		SimpleNode n = iCimpilir.Davai();   			n.dump("", window);		}		catch (Exception e1)     	{} 		catch (Error e1)   		{}  }  static public String im(int x)  {    int k;    String s;    s = tokenImage [x];    k = s.lastIndexOf("\"");    try    {      s = s.substring(1, k);    }    catch (StringIndexOutOfBoundsException e)    {}    return s;  }  static Token lastError = null;  static boolean eof;       static void consumeUntil(RecoverySet g, ParseException e, String milos) throws ParseEOFException, ParseException  {    Token tok;    window.setConsole("\n-- " + milos + " --");    window.setConsole("\n\tConjunto de sincronizacao: " + g);    if (g == null) throw e;     tok = getToken(1);     while (!eof)    {       if (g.contains(tok.kind))      {         window.setConsole("\n\tEncontrado token de sincronizacao: " + im(tok.kind));        break;      }      window.setConsole("\n\tIgnorando o token: " + im(tok.kind));      getNextToken();       tok = getToken(1);      if (tok.kind == EOF && !g.contains(EOF))        eof = true;    }    if (tok != lastError)    {      window.setConsole(e.getMessage());      lastError = tok;    }    if (eof) throw new ParseEOFException("EOF onde nao deveria!!");  }}PARSER_END(iCimpilir)SKIP :{  " "| "\t"| "\n"| "\r"| <COMENTARIO: "//" (<COM>)* >| <COMENTARIOS: "/*" ("\n" | "\r" | <COM>)* "*/" >| <#COM: ( ~["\"","\\","\n","\r","\""] | "\\" ( ["n","t","b","r","f","\\","\'","\""] | ( ["\n","\r"] | "\r\n") ) | "\"" )*>}TOKEN :{  <   MAIN: 			"principil"	>| <	  ABRECHAVES: 		"{"			>| <	  FECHACHAVES: 		"}"			>| <	  ABREPARENTESES: 	"("			>| <	  FECHAPARENTESES: 	")"			>| <   PONTOEVIRGULA: 	";"			>| <	  IF: 				"si"		>| <	  ELSE: 			"sinii"		>| <	  WHILE: 			"inquinti"	>	| <	  DO: 				"fici"		>| <   RETURN: 			"ritirni"	>| <   PRINTF: 			"iscrivi"	>| <   FUNCAO:			"fincii"	>| <   INT: 				"intiiri"	>| <   FLOAT: 			"dicimil"	>| <	  VIRGULA: 			","			>| <	  ATRIBUICAO: 		"="			>}TOKEN :{ <	OP: ("+" | "-" | "*" | "/" )					>|<	OPL: ( "<" | ">" | "=="| "<="| ">=" |"!")		>|<	#LETRA: ["a"-"z","A"-"Z"]							> |<	#DIGITO: ["0"-"9"]									>|<	#DIGITOS: <DIGITO> (<DIGITO>)*						>|<	#LD: <LETRA> | <DIGITO>							>|<	#FSUB: ("_"(<LD>)+)								>|<	#FOP: ("."<DIGITOS>)?							>|<	#EXPOP: ("&"("+" | "-")?<DIGITOS>)?				>|<	IDENTIFICADOR: <LETRA>(<LD>)*(<FSUB>)*					>|< 	TOKEN_NUMLIT: <DIGITOS><FOP><EXPOP>						>}SimpleNode Davai() throws ParseEOFException:{RecoverySet g = First.start;}{      try {	 Principal()  	Funcoes()  }  catch (ParseException e)    {       consumeUntil(g, e, "start");    }        {    return jjtThis;  }}void Funcoes() throws ParseEOFException:{RecoverySet g = First.variosFunc;}{		try {	  (Func()	  Funcoes())?    }    catch (ParseException e)    {       consumeUntil(g, e, "variosFunc");    }}int Principal() throws ParseEOFException:{RecoverySet g = First.main;}{  try {     	<MAIN> <ABRECHAVES>  		 DeclaraVaraiavel()		 SequnciaComandos()				 <FECHACHAVES>    }    catch (ParseException e)    {       consumeUntil(g, e, "main");    }    {    return 0;  	}}void DeclaraVaraiavel() throws ParseEOFException:{RecoverySet g = First.varDecl;}{    try {     	(Tipo() <IDENTIFICADOR> Atribuicao())*    }    catch (ParseException e)    {       consumeUntil(g, e, "varDecl");    } }void Tipo() throws ParseEOFException:{RecoverySet g = First.tipo;}{	try {     	<INT> | <FLOAT>    }    catch (ParseException e)    {       consumeUntil(g, e, "tipo");    }}void Atribuicao() throws ParseEOFException:{RecoverySet g = First.atribuicao;}{	try {     	 Atribuir()|<PONTOEVIRGULA>     }    catch (ParseException e)    {       consumeUntil(g, e, "atribuicao");    }  }void Atribuir() throws ParseEOFException:{RecoverySet g = First.atribuir;}{	try {     	<ATRIBUICAO> Exprecao() Loopzao()  |    	<ABREPARENTESES> ExprecaoLista() <FECHAPARENTESES> <PONTOEVIRGULA>|    	DeclaracaoM()     }    catch (ParseException e)    {       consumeUntil(g, e, "atribuir");    }}void ExprecaoLista()throws ParseEOFException:{RecoverySet g = First.talvezListaExp;}{	try {     	(ListaExprecao())?    }    catch (ParseException e)    {       consumeUntil(g, e, "talvezListaExp");    }  }void Loopzao()throws ParseEOFException:{RecoverySet g = First.loop;}{  	try {     	DeclaracaoM() | <PONTOEVIRGULA>    }    catch (ParseException e)    {       consumeUntil(g, e, "loop");    }   }void ListaExprecao() throws ParseEOFException:{RecoverySet g = First.listaExp;}{  	try {     	Exprecao() ListaExp2()    }    catch (ParseException e)    {       consumeUntil(g, e, "listaExp");    }}void ListaExp2() throws ParseEOFException:{RecoverySet g = First.listaExp2;}{	try {     	(<VIRGULA> Exprecao() ListaExp2())?    }    catch (ParseException e)    {       consumeUntil(g, e, "listaExp2");    }  }void DeclaracaoM() throws ParseEOFException:{RecoverySet g = First.mdeclaracao;}{	try {     	<VIRGULA> <IDENTIFICADOR> Atribuicao()    }    catch (ParseException e)    {       consumeUntil(g, e, "mdeclaracao");    }  	}void Exprecao() throws ParseEOFException:{RecoverySet g = First.exp;}{	try {     	<ABREPARENTESES> Exprecao() <OP> Exprecao() <FECHAPARENTESES> | Fator()    }    catch (ParseException e)    {       consumeUntil(g, e, "exp");    }	}void Fator() throws ParseEOFException:{RecoverySet g = First.fator;}{	try {     	<IDENTIFICADOR> Fator2() | <TOKEN_NUMLIT>    }    catch (ParseException e)    {       consumeUntil(g, e, "fator");    }  }void Fator2() throws ParseEOFException:{RecoverySet g = First.talvezFator;}{	try {     	(<ABREPARENTESES>ExprecaoLista() <FECHAPARENTESES>)?    }    catch (ParseException e)    {       consumeUntil(g, e, "talvezFator");    } 	}void SequnciaComandos() throws ParseEOFException:{RecoverySet g = First.seqComandos;}{	try {     	(Comando()SequnciaComandos())?    }    catch (ParseException e)    {       consumeUntil(g, e, "seqComandos");    }  }void Comando()throws ParseEOFException:{RecoverySet g = First.comando;}{	try {     	<IDENTIFICADOR> Atribuir() 		| <IF> <ABREPARENTESES> ExprecoesLogicas() <FECHAPARENTESES><ABRECHAVES>SequnciaComandos()<FECHACHAVES> Else()		| <WHILE> <ABREPARENTESES> ExprecoesLogicas() <FECHAPARENTESES><ABRECHAVES>SequnciaComandos()<FECHACHAVES> <PONTOEVIRGULA>		| <DO> <ABRECHAVES>SequnciaComandos()<FECHACHAVES> <WHILE> <ABREPARENTESES> ExprecoesLogicas() <FECHAPARENTESES> <PONTOEVIRGULA>								| <RETURN> Exprecao() <PONTOEVIRGULA>		| <PRINTF> <ABREPARENTESES> Exprecao() <FECHAPARENTESES> <PONTOEVIRGULA>    }    catch (ParseException e)    {       consumeUntil(g, e, "comando");    }   }void Else()throws ParseEOFException:{RecoverySet g = First.talvezElse;}{	try {     	(<ELSE> <ABRECHAVES>SequnciaComandos()<FECHACHAVES>)?    }    catch (ParseException e)    {       consumeUntil(g, e, "talvezElse");    }   }void ExprecoesLogicas() throws ParseEOFException:{RecoverySet g = First.exp_logicas;}{	try {     	<ABREPARENTESES> ExprecoesLogicas() <OPL> ExprecoesLogicas() <FECHAPARENTESES> | FatorLogico()    }    catch (ParseException e)    {       consumeUntil(g, e, "exp_logicas");    }  	}void FatorLogico() throws ParseEOFException:{RecoverySet g = First.fator_logico;}{	try {     	<IDENTIFICADOR> | <TOKEN_NUMLIT>     }    catch (ParseException e)    {       consumeUntil(g, e, "fator_logico");    }}void Func() throws ParseEOFException:{RecoverySet g = First.func;}{	try {     	<FUNCAO> Tipo() <IDENTIFICADOR> <ABREPARENTESES> ListaArgumentos() <FECHAPARENTESES> <ABRECHAVES> DeclaraVaraiavel() SequnciaComandos() <FECHACHAVES>    }    catch (ParseException e)    {       consumeUntil(g, e, "func");    }}void ListaArgumentos()throws ParseEOFException:{RecoverySet g = First.talvezLista1Argumentos;}{	try { ( Lista1Argumentos() )?    }    catch (ParseException e)    {       consumeUntil(g, e, "talvezLista1Argumentos");    }	}void Lista1Argumentos()throws ParseEOFException:{RecoverySet g = First.listaArg;}{	try {     	Tipo() <IDENTIFICADOR> Lista2Argumentos()    }    catch (ParseException e)    {       consumeUntil(g, e, "listaArg");    }  }void Lista2Argumentos()throws ParseEOFException:{RecoverySet g = First.listaArg2;}{	try { (<VIRGULA> Tipo() <IDENTIFICADOR> Lista2Argumentos())?    }    catch (ParseException e)    {       consumeUntil(g, e, "listaArg2");    } 		}